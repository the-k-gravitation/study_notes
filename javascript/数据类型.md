#datatype #javascript

javascript 被称为“动态类型”（dynamically typed）的编程语言，意思是虽然语言中有不同的数据类型，但定义好的变量并不会在定义后，被限制为某一数据类型，会随时所赋值的数据类型而发生变化。

javascript 中的值都是具有特定类型的。

在 javascript 中有 8 种基本的数据类型（**7** 种原始类型和 **1** 种引用类型）。

## Number 类型

#datatype #number

`number`类型代表**整数**和**浮点数**。

```js {.line-numbers}
let num = 100;
num = 1.2345;

let n = 8999999999;

// 下划线 `_` 使得数字具有更强的可读性
let n1 = 8_999_999_999;
console.log(n === n1); // true

let n2 = 1e5; // 科学计数法
let n3 = 100000;
console.log(n2 === n3); // true

let n4 = 1e-5;
let n5 = 1 / 100000;
console.log(n4 === n5); // true
```

除了常规的数字外，还包括几个“**特殊数值**”：`Infinity`、`-Infinity`和`NaN`。

- `Infinity` 表示**无穷大(正无穷) ∞**，`-Infinity`表示**无穷小(负无穷)-∞**。

  ```js {.line-numbers}
  let n = 10 / 0; // 通过除以 0 ，可以得到 Infinity
  let n2 = Infinity; // 可以直接使用Infinity来进行赋值

  let n3 = -10 / 0; // 会得到-Infinity
  ```

- `NaN` 表示**计算错误**。 它是一个不正确或者一个未定义的数学操作所得到的结果。

  ```js {.line-numbers}
  let n3 = 'Tom' / 2;
  console.log(n3); // NaN
  console.log(NaN + 10); // NaN
  console.log(NaN * 10); // NaN
  ```

任何对 **NaN** 的数学运算都会返回 `NaN`，只有一个例外：**NaN \*\* 0 = 1**。

`NaN` 是独一无二的，它不等于任何东西，包括它自身：

```js {.line-numbers}
console.log(NaN === NaN); // false
```

在 `javascript` 中做数学运算是安全的。脚本永远不会因为一个致命的数学运算而停止，最坏的情况，会得到 `NaN` 的结果。

### 十六进制、二进制和八进制

javascript 可以直接坚持 十六进制、二进制和八进制数字的编写：

```js {.line-numbers}
let a = 0xff; // 255

let b = 0b11111111; // 255

let c = 0o377; // 255

console.log(a === b); // true
console.log(b === c); // true
```

对于其他进制，可以使用 `parseInt()` 函数。

### toString(base)

`number.toString(base)` 用于返回 `number` 给定的 `base` 进制数字 的字符串。

```js {.line-numbers}
let num = 123;

console.log(num.toString(16)); // 7b
console.log(num.toString(8)); // 173
console.log(num.toString(2)); // 1111011
```

`base=36` 是最大进制。 可以用来将一个较长的数字标识符转换成较短的：

```js {.line-numbers}
let n = (12345664554).toString(36);
let n = (12345664554).toString(36); // 注意使用两个点
// 当直接将数字使用toString()时，可以使用上面 两种方式。
```

### 舍入

- Math.floor()

`向下`舍入：10.2 --> 10， `-10.2 --> -11` 。

- Math.ceil()

`向上`舍入： 10.2 --> 11， `-10.2 --> -10` 。

- Math.round()

`四舍五入` 向最近的整数舍入： 10.2 --> 10， `-10.5 --> -10`， -10.6 --> -11。

- Math.trunc()

移除小数点后面的所有内容而没有舍入（ _IE 浏览器不支持这个方法_ ） ： 10.2 --> 10， -10.2 --> -10 。

- toFixed(n)

`toFixed(n)` 将数字舍入到小数点后 `n` 位，并以 `字符串` 的形式返回。
`toFixed(n)` 会将数字舍入到最接近的值， 类似于 `Math.round` 。
如果 `n` 比数字所有的小数位还多，则结尾会添加零。

```js {.line-numbers}
let n1 = 10.27;
console.log(n1.toFiexed(1)); /// "10.3"

let n2 = 10.24;
console.log(n2.toFixed(1)); // "10.2"

let n3 = 10.25;
console.log(n3.toFixed(3)); // "10.250"
```

可以通过 一元加号 或 `Number()` 调用，将其转换为数字 ：

```js {.line-numbers}
let n = 10.237843;

n = +n.toFixed(2);
n = Number(n.toFixed(2));
```

### 不精确的计算

javascript 在内部，数字是以 64 位格式 [IEEE-754](http://en.wikipedia.org/wiki/IEEE_754) 表示的，所以正好有 `64` 位可以存储一个数字：其中 `52` 位被用于存储这些数字，其中 `11` 位用于存储小数点的位置，而 `1` 位用于符号。

处理精度损失最可靠的方式就是使用方法 `toFixed(n)` 对结果进行舍入：

```js {.line-numbers}
let sum = 0.1 + 0.2;  // 0.30000000000000004

// 使用tofixed()对计算之后的结果进行小数点的舍入，再将其转换为数字
sum = +sum.toFixed(2);
```

### isNaN(value) 与 isFinite(value)

`isNaN(value)` 用来测试 `value` 是否为 `NaN`： 

```js {.line-numbers}
console.log(isNaN(NaN)); // true
console.log(isNaN(Infinity)); // false
console.log(isNaN('abc')); // true
```

`isFinite(value)`  将其参数转换为数字，如果是常规数字而不是 `NaN/Infinity/-Infinity`，则返回 `true`：

```js {.line-numbers}
console.log(isFinite('10')); // true
console.log
```

## BigInt 类型

#datatype #bigint

在 javascript 中，Number 类型无法安全表示大于 `2**53-1`(即 9007199254740991)，或小于`-(2**53-1)`的整数。

```js {.line-numbers}
// 所有大于2**53-1或者小于-(大于2**53-1)的奇数都不能用Number类型来存储和正常表示
console.log(9007199254740991 + 1);
console.log(9007199254740991 + 2); // 9007199254740992
console.log(9007199254740991 + 3);
console.log(9007199254740991 + 4); // 9007199254740996
console.log(9007199254740995); // 9007199254740996
console.log(9007199254740991 + 5);
console.log(-9007199254740995); // -9007199254740996
console.log(-9007199254740996);
```

在大多数情况下，使用 Number 类型是足够了，但在一些特殊的时候可能需要范围非常大的整数，比如用于密码学或者微秒精度的时间。
`BigInt`类型是新添加到 javascript 中的，用于表示任意长度的整数。通过在整数末尾添加 **n** 来表示 BigInt 值。

```js {.line-numbers}
// 尾部添加 "n" 表示这是一个 BigInt 类型
// 目前 Firefox/Chrome/Edge/Safari 已经支持 BigInt 了，但 IE 还没有。
const bigN = 90071992547409919007199254740991n;
```

## String 类型

#datatype #string

在 javascript 中，有 3 种表示字符串的方式：

- 双引号： "Hello,World"。
- 单引号： 'Hello,World'。
- 反引号： \`Hello,World\`。

双引号和单引号没有什么区别。 `反引号`是 **功能扩展** 引号，通过它可以将变量或者表达式包装在`${...}`中，嵌入到字符串，方便字符串的操作。

```js {.line-numbers}
let firstName = 'Tom';
let lastName = 'Wu';
let fullName = `${firstName} ${lastName}`; // fullName = ："Tom Wu"

console.log(`1 + 2 = ${1 + 2}`); //输出：1 + 2 = 3
```

在 javascript 中没有 character 类型，一个字符串可以包含零个（为空）、一个或者多个字符。

## Boolean 类型

#datatype #boolean

boolean 类型仅包含两个值： `true` 和 `false` 。

对象在 `if` 中始终为真：

```js {.line-numbers}
let obj = {};
if (obj) {
  console.log('空对象在if中也是为真！！！');
}

// 注意，这里使用了 new
let zero = new Number(0);
if (zero) {
  console.log('只要是对象，在if中都是为真的！！！！！');
}

let zero = Number(0); // 此处是类型转换
if (zero) {
  console.log('此时，就不会执行这里了哦！！！！！');
}
```

## Null 值

#datatype #null

javascript 中的 `null` ，仅仅表示 “**无**” 、 “**空**” 或者 “**值未知**” 的特殊值，它不是一个“对不存在的 object 的引用” 或者 ”null 指针”。

```js {.line-numbers}
let name = null; // 表示name是未知的
```

## Undefined 值

#datatype #undefined

`undefined` 表示 “**未被赋值**”。
如果一个变量已经被声明，但未被赋值，那么它的值就是 `undefined` 。

```js {.line-numbers}
let name;
console.log(name); // undefined
```

## Symbol 类型

![[Symbol类型]]

## Object 类型

![Object类型](./Object类型.md)

## typeof 运算符

typeof 运算符 返回参数的类型。 typeof 是一个操作符，不是一个函数。

| typeof 的代码写法 | 返回结果  |
| :---------------- | :-------- |
| typeof 数字       | number    |
| typeof 字符串     | string    |
| typeof 布尔型     | boolean   |
| typeof 对象       | object    |
| typeof 方法       | function  |
| typeof null       | object    |
| typeof undefined  | undefined |
| typeof []         | object    |
| typeof {}         | object    |

```js {.line-numbers}
typeof undefined; // "undefined"
typeof NaN; // "number"   NaN 是一个特殊的数字
typeof null; // "object"  官方承认的 typeof 的错误，这个问题来自于 JavaScript 语言的早期阶段，并为了兼容性而保留了下来。null 绝对不是一个 object。null 有自己的类型，它是一个特殊值。typeof 的行为在这里是错误的。
typeof 100; // "number"
typeof 100n; // "bigint"
typeof false; // "boolean"
typeof 'Tom'; // "string"
typeof Symbol('example'); // "symbol"
typeof Math; // "object"  Math 是一个提供数学运算的内建 object
typeof console.log; // "function"
```

## 类型转换

![[类型转换]]

## 原始类型的方法

javascript 给原始类型提供了一些方法，让它们像对象一样使用。

“对象包装器”对于每种原始类型都是不同的，它们被称为  `String`、`Number`、`Boolean`、`Symbol`  和  `BigInt`。因此，它们提供了不同的方法。

```js {.line-numbers}
let str = 'Tom';
console.log(str.toUpperCase()); // TOM

let n = 1.6777;
console.log(n.toFixed(2)); // 1.68
```

`null` 和 `undefined` 没有对应的 “对象包装器”， 也没有提供任何方法。

```js {.line-numbers}
let str = 'abc';

str.a = 10;

console.log(str.a); // undefined (非严格模式下)， 严格模式下会报错
```

对于 原始类型，它们不能存储额外的数据！！！！
